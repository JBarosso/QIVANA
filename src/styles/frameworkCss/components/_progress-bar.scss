// ============================================
// ðŸ“Š PROGRESS BAR COMPONENT STYLES
// ============================================
// Barre de progression linÃ©aire, circulaire et Ã©tapes

@use '../tokens' as *;

// ============================================
// BASE STYLES
// ============================================

.progress-bar {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  
  // ========== VARIANTS ==========
  
  &--linear {
    width: 100%;
  }
  
  &--circular {
    width: fit-content;
  }
  
  &--steps {
    width: 100%;
  }
}

// ============================================
// HEADER (Label + Value)
// ============================================

.progress-bar__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-1);
}

.progress-bar__label {
  font-size: var(--progress-bar-label-font-size);
  font-weight: var(--font-weight-medium);
  color: var(--progress-bar-label-color);
}

.progress-bar__value {
  font-size: var(--progress-bar-value-font-size);
  font-weight: var(--font-weight-semibold);
  color: var(--progress-bar-value-color);
}

// ============================================
// LINEAR PROGRESS
// ============================================

.progress-bar__track {
  width: 100%;
  height: var(--progress-bar-linear-height);
  background: var(--progress-bar-linear-track-bg);
  border-radius: var(--progress-bar-linear-border-radius);
  overflow: hidden;
  position: relative;
}

.progress-bar__fill {
  height: 100%;
  background: var(--progress-bar-linear-fill-bg);
  border-radius: var(--progress-bar-linear-border-radius);
  transition: var(--progress-bar-transition);
  
  // Size variants for linear
  .progress-bar--size-sm & {
    height: var(--progress-bar-linear-height-sm);
  }
  
  .progress-bar--size-lg & {
    height: var(--progress-bar-linear-height-lg);
  }
}

// ============================================
// CIRCULAR PROGRESS
// ============================================

.progress-bar__circular {
  position: relative;
  width: var(--progress-bar-circular-size);
  height: var(--progress-bar-circular-size);
  
  // Size variants
  .progress-bar--size-sm & {
    width: var(--progress-bar-circular-size-sm);
    height: var(--progress-bar-circular-size-sm);
  }
  
  .progress-bar--size-lg & {
    width: var(--progress-bar-circular-size-lg);
    height: var(--progress-bar-circular-size-lg);
  }
}

.progress-bar__svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}

.progress-bar__circle-bg {
  fill: none;
  stroke: var(--progress-bar-circular-bg);
  stroke-width: var(--progress-bar-circular-stroke-width);
}

.progress-bar__circle-fill {
  fill: none;
  stroke: var(--progress-bar-circular-fill);
  stroke-width: var(--progress-bar-circular-stroke-width);
  stroke-linecap: round;
  transition: stroke-dasharray 0.5s var(--ease-out);
}

.progress-bar__circular-value {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: var(--progress-bar-value-font-size);
  font-weight: var(--font-weight-bold);
  color: var(--progress-bar-label-color);
  text-align: center;
}

// ============================================
// STEPS PROGRESS
// ============================================

.progress-bar__steps {
  display: flex;
  align-items: center;
  gap: var(--progress-bar-steps-gap);
  width: 100%;
}

.progress-bar__step {
  display: flex;
  align-items: center;
  position: relative;
  flex: 1;
  
  &:last-child {
    flex: 0;
  }
}

.progress-bar__step-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--progress-bar-step-size);
  height: var(--progress-bar-step-size);
  border-radius: var(--radius-full);
  background: var(--progress-bar-step-bg);
  position: relative;
  z-index: 2;
  
  // Size variants for steps
  .progress-bar--size-sm & {
    width: var(--progress-bar-step-size-sm);
    height: var(--progress-bar-step-size-sm);
  }
  
  .progress-bar--size-lg & {
    width: var(--progress-bar-step-size-lg);
    height: var(--progress-bar-step-size-lg);
  }
}

.progress-bar__step--complete .progress-bar__step-indicator {
  background: var(--progress-bar-step-complete-bg);
  
  &::after {
    content: 'âœ“';
    color: white;
    font-size: var(--fs-3);
    font-weight: var(--font-weight-bold);
  }
}

.progress-bar__step-line {
  position: absolute;
  left: var(--progress-bar-step-size);
  top: 50%;
  right: 0;
  height: var(--progress-bar-step-line-width);
  background: var(--progress-bar-step-line-bg);
  z-index: 1;
  transform: translateY(-50%);
  
  // Size variants
  .progress-bar--size-sm & {
    left: var(--progress-bar-step-size-sm);
  }
  
  .progress-bar--size-lg & {
    left: var(--progress-bar-step-size-lg);
  }
}

.progress-bar__step--complete + .progress-bar__step .progress-bar__step-line,
.progress-bar__step--complete ~ .progress-bar__step .progress-bar__step-line {
  background: var(--progress-bar-step-complete-bg);
}

// ============================================
// FOOTER (Value only)
// ============================================

.progress-bar__footer {
  display: flex;
  justify-content: flex-end;
  margin-top: var(--space-1);
}

// ============================================
// COLOR VARIANTS
// ============================================

.progress-bar--primary {
  .progress-bar__fill,
  .progress-bar__circle-fill {
    background: var(--progress-bar-linear-fill-bg);
  }
  
  .progress-bar__step--complete .progress-bar__step-indicator {
    background: var(--progress-bar-step-complete-bg);
  }
}

.progress-bar--success {
  .progress-bar__fill,
  .progress-bar__circle-fill {
    background: var(--progress-bar-success-bg);
  }
  
  .progress-bar__step--complete .progress-bar__step-indicator {
    background: var(--progress-bar-success-bg);
  }
}

.progress-bar--warning {
  .progress-bar__fill,
  .progress-bar__circle-fill {
    background: var(--progress-bar-warning-bg);
  }
  
  .progress-bar__step--complete .progress-bar__step-indicator {
    background: var(--progress-bar-warning-bg);
  }
}

.progress-bar--error {
  .progress-bar__fill,
  .progress-bar__circle-fill {
    background: var(--progress-bar-error-bg);
  }
  
  .progress-bar__step--complete .progress-bar__step-indicator {
    background: var(--progress-bar-error-bg);
  }
}

.progress-bar--info {
  .progress-bar__fill,
  .progress-bar__circle-fill {
    background: var(--progress-bar-info-bg);
  }
  
  .progress-bar__step--complete .progress-bar__step-indicator {
    background: var(--progress-bar-info-bg);
  }
}

// ============================================
// ANIMATION
// ============================================

.progress-bar--animated {
  .progress-bar__fill {
    animation: progressBarPulse 1.5s ease-in-out infinite;
  }
  
  .progress-bar__circle-fill {
    animation: progressBarRotate var(--progress-bar-rotate-duration) linear infinite;
  }
}

@keyframes progressBarPulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

@keyframes progressBarRotate {
  0% {
    stroke-dashoffset: 0;
  }
  50% {
    stroke-dashoffset: 141;
  }
  100% {
    stroke-dashoffset: 283;
  }
}

// ============================================
// DARK MODE
// ============================================

[data-theme="dark"] {
  .progress-bar {
    // Les tokens s'adaptent automatiquement via _tokens.scss
  }
}

